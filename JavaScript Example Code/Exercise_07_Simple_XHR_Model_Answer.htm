<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang = "en">
	<head>
      <script type = "text/javascript" src = "XHRFactory.js"></script>
      <script type = "text/javascript">

      function Init ()
         {
         var XHRWrapper = XHRFactory.CreateXHRWrapper ();

         var Timer      = null;

         var InputElem  = document.getElementById     ("InputField");
         var OutputElem = document.getElementById     ("OutputElem");

         //-------------------------------------------------------------

         function OnTimedOut    () { XHRWrapper.Abort (); }
         function OnXHRResponse (XHRObj)
            {
            clearTimeout (Timer);
            OutputElem.firstChild.nodeValue = XHRObj.responseText;
            }

         document.getElementById ("SubmitButton").onclick = function ()
            {
            var QueryStr = "Exercise_07_Serverside_Code/Ex07.php?String=" + encodeURIComponent (InputElem.value);

            Timer = setTimeout (OnTimedOut, 30000);

            XHRWrapper.DoTxn ("GET", QueryStr, OnXHRResponse);

            }

         }

      </script>

      <title>Exercise 07</title>

	</head>

   <body onload = "Init ()">

   <form action = "">
      <input type = "text" maxlength ="40" size = "40" id = "InputField" />
   </form>

   <button id = "SubmitButton">Submit</button>

   <p id = "OutputElem">.</p>

	</body>

</html>
